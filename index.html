<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solutions - Orientation</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- SheetJS pour lire les fichiers Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <style>
        /* ===== CSS PERSONNALIS√â POUR ROME PRO - VERSION AM√âLIOR√âE ===== */
        :root {
            --primary: #0055a4;
            --primary-dark: #003f7f;
            --secondary: #ef4135;
            --secondary-dark: #d12f24;
            --success: #28a745;
            --info: #17a2b8;
            --warning: #ffc107;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --gray-dark: #495057;
            
            --gradient-primary: linear-gradient(135deg, #0055a4 0%, #0072ce 100%);
            --gradient-secondary: linear-gradient(135deg, #ef4135 0%, #ff6b6b 100%);
            
            --font-family-sans: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --border-radius: 0.375rem;
            --border-radius-lg: 0.5rem;
            --border-radius-xl: 1rem;
            --box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            --box-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            --transition-base: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-sans);
            font-size: 1rem;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--light);
            padding-top: 70px;
            overflow-x: hidden;
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: var(--transition-base);
        }
        a:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        /* ===== SYST√àME DE GRILLE ===== */
        .container {
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
        }
        @media (min-width: 576px) { .container { max-width: 540px; } }
        @media (min-width: 768px) { .container { max-width: 720px; } }
        @media (min-width: 992px) { .container { max-width: 960px; } }
        @media (min-width: 1200px) { .container { max-width: 1140px; } }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -15px;
            margin-left: -15px;
        }

        .col-md-3, .col-md-4, .col-md-6, .col-lg-4, .col-lg-6, .col-lg-8, .col-lg-10 {
            position: relative;
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
        }
        @media (min-width: 768px) {
            .col-md-3 { flex: 0 0 25%; max-width: 25%; }
            .col-md-4 { flex: 0 0 33.333%; max-width: 33.333%; }
            .col-md-6 { flex: 0 0 50%; max-width: 50%; }
        }
        @media (min-width: 992px) {
            .col-lg-4 { flex: 0 0 33.333%; max-width: 33.333%; }
            .col-lg-6 { flex: 0 0 50%; max-width: 50%; }
            .col-lg-8 { flex: 0 0 66.666%; max-width: 66.666%; }
            .col-lg-10 { flex: 0 0 83.333%; max-width: 83.333%; }
        }

        /* ===== UTILITAIRES ===== */
        .d-none { display: none !important; }
        .d-block { display: block !important; }
        .d-flex { display: flex !important; }
        .flex-wrap { flex-wrap: wrap !important; }
        .justify-content-center { justify-content: center !important; }
        .justify-content-between { justify-content: space-between !important; }
        .align-items-center { align-items: center !important; }
        .text-center { text-align: center !important; }
        .text-left { text-align: left !important; }
        .text-muted { color: var(--gray) !important; }
        .text-primary { color: var(--primary) !important; }
        .text-success { color: var(--success) !important; }
        .text-warning { color: var(--warning) !important; }
        .bg-light { background-color: var(--light) !important; }
        .bg-gradient-primary { background: var(--gradient-primary) !important; color: white; }
        .bg-success { background-color: var(--success) !important; color: white; }
        .bg-warning { background-color: var(--warning) !important; color: #212529; }
        .border-0 { border: 0 !important; }
        .border-primary { border-color: var(--primary) !important; }
        .shadow-lg { box-shadow: var(--box-shadow) !important; }

        .mt-3 { margin-top: 1rem !important; }
        .mt-4 { margin-top: 1.5rem !important; }
        .mt-5 { margin-top: 3rem !important; }
        .mb-2 { margin-bottom: 0.5rem !important; }
        .mb-3 { margin-bottom: 1rem !important; }
        .mb-4 { margin-bottom: 1.5rem !important; }
        .mb-5 { margin-bottom: 3rem !important; }
        .me-1 { margin-right: 0.25rem !important; }
        .me-2 { margin-right: 0.5rem !important; }
        .ms-2 { margin-left: 0.5rem !important; }
        .p-3 { padding: 1rem !important; }
        .p-4 { padding: 1.5rem !important; }
        .p-5 { padding: 3rem !important; }
        .py-4 { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
        .px-5 { padding-left: 3rem !important; padding-right: 3rem !important; }
        .gap-3 { gap: 1rem !important; }
        .w-100 { width: 100% !important; }

        /* ===== NAVBAR ===== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 1rem;
            background: var(--gradient-primary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        }
        .navbar-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .navbar-brand i { font-size: 1.8rem; }
        .navbar-toggler {
            display: none;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: var(--border-radius);
            color: white;
            padding: 0.4rem 0.8rem;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .navbar-collapse { display: flex; align-items: center; }
        .navbar-nav { display: flex; list-style: none; margin: 0; padding: 0; }
        .nav-item { margin-left: 1rem; }
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.5rem 1rem;
            color: rgba(255,255,255,0.8);
            border-radius: var(--border-radius);
            transition: var(--transition-base);
            font-weight: 500;
        }
        .nav-link:hover, .nav-link.active {
            color: white;
            background: rgba(255,255,255,0.15);
        }

        @media (max-width: 767px) {
            .navbar-toggler { display: block; }
            .navbar-collapse {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--gradient-primary);
                padding: 1rem;
                flex-direction: column;
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }
            .navbar-collapse.show { display: flex; }
            .navbar-nav { flex-direction: column; }
            .nav-item { margin: 0.5rem 0; }
        }

        /* ===== BOUTONS ===== */
        .btn {
            display: inline-block;
            font-weight: 500;
            text-align: center;
            vertical-align: middle;
            border: 1px solid transparent;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            line-height: 1.5;
            border-radius: var(--border-radius);
            transition: var(--transition-base);
            cursor: pointer;
            text-decoration: none;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: var(--box-shadow-sm); }
        .btn-lg { padding: 0.75rem 1.5rem; font-size: 1.25rem; border-radius: var(--border-radius-lg); }
        .btn-primary { background: var(--gradient-primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); color: white; }
        .btn-outline-light {
            background: transparent;
            color: white;
            border: 2px solid white;
        }
        .btn-outline-light:hover {
            background: white;
            color: var(--primary);
        }
        .btn-outline-secondary {
            background: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }
        .btn-outline-secondary:hover {
            background: var(--gray);
            color: white;
        }
        .btn-outline-primary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        .btn-outline-primary:hover {
            background: var(--primary);
            color: white;
        }

        /* ===== CARTES ===== */
        .card {
            background-color: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-lg);
            margin-bottom: 1rem;
            transition: var(--transition-base);
        }
        .card:hover { box-shadow: var(--box-shadow-sm); }
        .card-header {
            padding: 1rem 1.25rem;
            background-color: rgba(0,0,0,0.03);
            border-bottom: 1px solid var(--gray-light);
            font-weight: 600;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }
        .card-body { padding: 1.25rem; }
        .card-footer {
            padding: 1rem 1.25rem;
            background-color: rgba(0,0,0,0.03);
            border-top: 1px solid var(--gray-light);
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
        }
        .h-100 { height: 100%; }

        /* ===== BADGES ===== */
        .badge {
            display: inline-block;
            padding: 0.35em 0.65em;
            font-size: 0.75em;
            font-weight: 700;
            line-height: 1;
            color: white;
            text-align: center;
            border-radius: var(--border-radius);
        }
        .badge-primary { background-color: var(--primary); }
        .badge-success { background-color: var(--success); }
        .badge-warning { background-color: var(--warning); color: #212529; }

        /* ===== ALERTES ===== */
        .alert {
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: var(--border-radius-lg);
        }
        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }
        .alert-warning {
            color: #856404;
            background-color: #fff3cd;
            border-color: #ffeeba;
        }
        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        /* ===== FORMULAIRES ===== */
        .form-group { margin-bottom: 1rem; }
        .form-label {
            display: inline-block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .form-control, .form-select {
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            font-size: 1rem;
            line-height: 1.5;
            color: var(--gray-dark);
            background-color: white;
            border: 1px solid #ced4da;
            border-radius: var(--border-radius);
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0,85,164,0.25);
        }
        .form-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            appearance: none;
        }
        .form-check {
            display: block;
            min-height: 1.5rem;
            padding-left: 1.5em;
            margin-bottom: 0.125rem;
        }
        .form-check-input {
            width: 1em;
            height: 1em;
            margin-left: -1.5em;
            vertical-align: top;
            border: 1px solid rgba(0,0,0,0.25);
            appearance: none;
        }
        .form-check-input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        .competence-tag {
            display: inline-block;
            background: rgba(0,85,164,0.1);
            color: var(--primary);
            padding: 0.5rem 1.25rem;
            border-radius: 50rem;
            margin: 0.25rem;
            font-size: 0.95rem;
            border: 1px solid rgba(0,85,164,0.2);
            cursor: pointer;
            transition: var(--transition-base);
        }
        .competence-tag:hover { background: rgba(0,85,164,0.2); transform: scale(1.05); }
        .competence-tag.selected { background: var(--primary); color: white; }

        /* ===== LISTES ===== */
        .list-group { display: flex; flex-direction: column; }
        .list-group-item {
            padding: 0.75rem 1.25rem;
            background-color: white;
            border: 1px solid var(--gray-light);
            transition: var(--transition-base);
        }
        .list-group-item-action { cursor: pointer; }
        .list-group-item-action:hover {
            background-color: var(--light);
            transform: translateX(5px);
        }
        .list-unstyled { padding-left: 0; list-style: none; }

        /* ===== MODALE ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1050;
            align-items: center;
            justify-content: center;
        }
        .modal.show { display: flex; }
        .modal-dialog { width: 90%; max-width: 800px; }
        .modal-content {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }
        .modal-header {
            padding: 1rem 1.5rem;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-header .btn-close {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .modal-body { padding: 1.5rem; }
        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--gray-light);
            text-align: right;
        }

        /* ===== ONGLETS ===== */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            list-style: none;
            border-bottom: 2px solid var(--gray-light);
            margin-bottom: 1.5rem;
        }
        .nav-item { margin-bottom: -2px; }
        .nav-link {
            display: block;
            padding: 0.75rem 1.25rem;
            border: 1px solid transparent;
            border-top-left-radius: var(--border-radius);
            border-top-right-radius: var(--border-radius);
            color: var(--gray);
            background: none;
            cursor: pointer;
            font-weight: 500;
        }
        .nav-link:hover { color: var(--primary); }
        .nav-link.active {
            color: var(--primary);
            background-color: white;
            border-color: var(--gray-light) var(--gray-light) white;
            font-weight: 700;
        }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; animation: fadeIn 0.5s; }

        /* ===== COMPOSANTS SP√âCIFIQUES ===== */
        .hero-section {
            background: linear-gradient(rgba(0,85,164,0.9), rgba(0,114,206,0.9));
            color: white;
            padding: 5rem 2rem;
            border-radius: var(--border-radius-xl);
            margin-bottom: 3rem;
            text-align: center;
        }
        .feature-card {
            background: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius-xl);
            padding: 2rem 1.5rem;
            text-align: center;
            transition: var(--transition-base);
            height: 100%;
        }
        .feature-card i { font-size: 3rem; color: var(--primary); margin-bottom: 1.5rem; }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow);
            border-color: var(--primary);
        }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s; }
        .solution-card {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 6px solid var(--warning);
            transition: var(--transition-base);
        }
        .solution-card:hover { transform: translateX(5px); }
        .solution-link {
            display: block;
            padding: 1rem 1.25rem;
            background: white;
            border-radius: var(--border-radius);
            color: var(--primary);
            border: 1px solid var(--gray-light);
            transition: var(--transition-base);
            text-decoration: none;
        }
        .solution-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        .match-score {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            line-height: 1.2;
            margin: 1.5rem 0;
        }
        .stat-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            text-align: center;
            border: 1px solid var(--gray-light);
            transition: var(--transition-base);
        }
        .stat-card:hover { transform: scale(1.05); box-shadow: var(--box-shadow); }
        .stat-card h1 { font-size: 3rem; margin-bottom: 0.5rem; }

        /* ===== FOOTER ===== */
        .footer {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }
        .footer a { color: var(--warning); }
        .footer a:hover { opacity: 0.8; text-decoration: underline; }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== LOADER ===== */
        .loader-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        .loader {
            border: 4px solid var(--gray-light);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        @media (max-width: 768px) {
            body { padding-top: 60px; }
            .hero-section { padding: 3rem 1rem; }
            .hero-section h1 { font-size: 2rem; }
            .match-score { font-size: 2.5rem; }
            .stat-card h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container" style="display: flex; align-items: center; justify-content: space-between;">
            <a class="navbar-brand" href="#"><i class="fas fa-bullseye"></i>ROME Pro</a>
            <button class="navbar-toggler" onclick="toggleNavbar()">‚ò∞</button>
            <div class="navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" data-section="home" href="#home"><i class="fas fa-home"></i>Accueil</a></li>
                    <li class="nav-item"><a class="nav-link" data-section="orientation" href="#orientation"><i class="fas fa-compass"></i>Orientation</a></li>
                    <li class="nav-item"><a class="nav-link" data-section="difficulties" href="#difficulties"><i class="fas fa-hands-helping"></i>Aides</a></li>
                    <li class="nav-item"><a class="nav-link" data-section="stats" href="#stats"><i class="fas fa-chart-bar"></i>Statistiques</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- HOME SECTION -->
        <section id="home" class="section active">
            <div class="hero-section">
                <h1>ROME Pro Officiel</h1>
                <p class="lead">La r√©f√©rence officielle des m√©tiers</p>
                <p>Bas√© sur les donn√©es ROME 4.0 - Plus de 13 000 appellations</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <button class="btn btn-light orientation-btn"><i class="fas fa-compass me-2"></i>D√©couvrir les m√©tiers</button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4"><div class="feature-card"><i class="fas fa-database"></i><h4>Donn√©es Officielles</h4><p>Classification nationale - ROME 4.0</p><span class="badge badge-primary" id="metiersCount">Chargement...</span></div></div>
                <div class="col-md-4"><div class="feature-card"><i class="fas fa-sitemap"></i><h4>Grands domaines</h4><p>14 grands domaines professionnels</p><span class="badge badge-success" id="domainesCount">Chargement...</span></div></div>
                <div class="col-md-4"><div class="feature-card"><i class="fas fa-tags"></i><h4>Fiches ROME</h4><p>Descriptifs d√©taill√©s</p><span class="badge badge-warning" id="fichesCount">Chargement...</span></div></div>
            </div>
            <div class="card border-0 bg-light mt-4">
                <div class="card-body p-5">
                    <h3 class="text-center mb-4">Classification officielle des m√©tiers</h3>
                    <div class="row">
                        <div class="col-md-6"><ul class="list-unstyled" id="domainesList"><li class="loader-container"><div class="loader"></div></li></ul></div>
                        <div class="col-md-6"><div class="alert alert-info"><i class="fas fa-info-circle me-2"></i>Donn√©es mises √† jour : R√©f√©rentiel ROME v4.6.0 - Septembre 2025</div></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ORIENTATION SECTION -->
        <section id="orientation" class="section">
            <div class="card shadow-lg mb-5">
                <div class="card-header bg-gradient-primary"><i class="fas fa-compass me-2"></i>Orientation Professionnelle</div>
                <div class="card-body">
                    <div class="alert alert-info mb-4"><i class="fas fa-database me-2"></i><strong>Donn√©es officielles ROME :</strong> <span id="statsMetiers">-</span> m√©tiers r√©f√©renc√©s</div>
                    <form id="profileForm">
                        <div class="row">
                            <!-- Identit√© -->
                            <div class="col-lg-4">
                                <div class="card border-primary h-100">
                                    <div class="card-header bg-light"><h5><i class="fas fa-user me-2"></i>Identit√©</h5></div>
                                    <div class="card-body">
                                        <div class="form-group"><label class="form-label">Nom complet</label><input type="text" class="form-control" id="nom" placeholder="Jean Dupont"></div>
                                        <div class="form-group"><label class="form-label">Objectifs professionnels</label><textarea class="form-control" id="objectifs" rows="3" placeholder="Je souhaite me reconvertir dans..."></textarea></div>
                                        <div class="form-group"><label class="form-label">Secteur vis√©</label>
                                            <select class="form-select" id="secteur">
                                                <option value="">Choisissez un secteur</option>
                                                <option value="informatique">Informatique / Num√©rique</option>
                                                <option value="sante">Sant√© / Social</option>
                                                <option value="commerce">Commerce / Vente</option>
                                                <option value="administration">Administration / Services</option>
                                                <option value="transport">Transport / Logistique</option>
                                                <option value="btp">Artisanat / BTP</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Comp√©tences -->
                            <div class="col-lg-4">
                                <div class="card border-primary h-100">
                                    <div class="card-header bg-light"><h5><i class="fas fa-tools me-2"></i>Comp√©tences</h5></div>
                                    <div class="card-body">
                                        <div class="form-group"><label class="form-label">Comp√©tences techniques</label>
                                            <div id="competencesContainer">
                                                <span class="competence-tag" data-value="informatique">Informatique</span>
                                                <span class="competence-tag" data-value="programmation">Programmation</span>
                                                <span class="competence-tag" data-value="gestion">Gestion</span>
                                                <span class="competence-tag" data-value="soins">Soins</span>
                                                <span class="competence-tag" data-value="commerce">Commerce</span>
                                                <span class="competence-tag" data-value="construction">Construction</span>
                                                <span class="competence-tag" data-value="transport">Transport</span>
                                            </div>
                                            <input type="hidden" id="competences">
                                        </div>
                                        <div class="form-group"><label class="form-label">Soft Skills</label>
                                            <div id="softSkillsContainer">
                                                <span class="competence-tag" data-value="communication">Communication</span>
                                                <span class="competence-tag" data-value="organisation">Organisation</span>
                                                <span class="competence-tag" data-value="adaptation">Adaptation</span>
                                                <span class="competence-tag" data-value="leadership">Leadership</span>
                                                <span class="competence-tag" data-value="creativite">Cr√©ativit√©</span>
                                            </div>
                                            <input type="hidden" id="softSkills">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Freins -->
                            <div class="col-lg-4">
                                <div class="card border-primary h-100">
                                    <div class="card-header bg-light"><h5><i class="fas fa-exclamation-triangle me-2"></i>Freins</h5></div>
                                    <div class="card-body">
                                        <div class="form-group"><label class="form-label">Difficult√©s rencontr√©es</label>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" value="logement" id="logement"><label for="logement">üè† Logement</label></div>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" value="garde_enfant" id="garde_enfant"><label for="garde_enfant">üë∂ Garde d'enfant</label></div>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" value="sante" id="sante"><label for="sante">üè• Sant√©</label></div>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" value="transport" id="transport"><label for="transport">üöó Transport</label></div>
                                            <div class="form-check"><input class="form-check-input" type="checkbox" value="formation" id="formation"><label for="formation">üìö Formation</label></div>
                                        </div>
                                        <div class="form-group"><label class="form-label">Mode de travail</label>
                                            <select class="form-select" id="modeTravail">
                                                <option value="presentiel">Pr√©sentiel</option>
                                                <option value="teletravail">T√©l√©travail</option>
                                                <option value="hybride">Hybride</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4"><button type="submit" class="btn btn-primary px-5"><i class="fas fa-rocket me-2"></i>Analyser mon profil</button></div>
                    </form>
                </div>
            </div>

            <!-- R√©sultats -->
            <div id="resultsSection" class="d-none">
                <div class="row"><div class="col-lg-12"><div class="card border-success shadow-lg"><div class="card-header bg-success text-white"><i class="fas fa-briefcase me-2"></i>M√©tiers Recommand√©s</div><div class="card-body"><div class="text-center mb-4"><div class="match-score" id="avgScore">0%</div><p class="text-muted">Score de compatibilit√© moyen</p></div><div id="metiersList" class="list-group"></div></div></div></div></div>
                <div class="card border-warning shadow-lg mt-4" id="solutionsCard"><div class="card-header bg-warning text-dark"><i class="fas fa-hands-helping me-2"></i>Solutions pour vos freins</div><div class="card-body"><div id="solutionsContainer" class="row"></div></div></div>
            </div>

            <!-- Modal d√©tail m√©tier -->
            <div class="modal" id="metierDetailModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">D√©tail du m√©tier</h5><button type="button" class="btn-close" onclick="document.getElementById('metierDetailModal').classList.remove('show')">√ó</button></div><div class="modal-body" id="metierDetailContent"></div><div class="modal-footer"><button class="btn btn-primary" onclick="document.getElementById('metierDetailModal').classList.remove('show')">Fermer</button></div></div></div></div>
        </section>

        <!-- DIFFICULTIES SECTION (aides) -->
        <section id="difficulties" class="section">
            <div class="card shadow-lg">
                <div class="card-header bg-gradient-primary"><i class="fas fa-hands-helping me-2"></i>Aides Gouvernementales Officielles</div>
                <div class="card-body">
                    <ul class="nav-tabs" id="aidesTab">
                        <li class="nav-item"><button class="nav-link active" onclick="switchTab('logement')">üè† Logement</button></li>
                        <li class="nav-item"><button class="nav-link" onclick="switchTab('enfant')">üë∂ Garde d'enfant</button></li>
                        <li class="nav-item"><button class="nav-link" onclick="switchTab('sante')">üè• Sant√©</button></li>
                        <li class="nav-item"><button class="nav-link" onclick="switchTab('transport')">üöó Transport</button></li>
                        <li class="nav-item"><button class="nav-link" onclick="switchTab('formationAide')">üìö Formation</button></li>
                        <li class="nav-item"><button class="nav-link" onclick="switchTab('juridique')">‚öñÔ∏è Juridique</button></li>
                    </ul>
                    <div class="tab-content">
                        <!-- Les onglets reprennent les m√™mes liens que pr√©c√©demment, je les abr√®ge ici pour la lisibilit√© mais ils sont identiques -->
                        <div class="tab-pane active" id="logement-content"><div class="row">
                            <div class="col-md-4 mb-3"><a href="https://www.actionlogement.fr" target="_blank" class="solution-link"><i class="fas fa-home text-primary me-2"></i>Action Logement <small class="d-block text-muted">Aides √† la mobilit√©</small></a></div>
                            <div class="col-md-4 mb-3"><a href="https://www.service-public.fr/particuliers/vosdroits/F12006" target="_blank" class="solution-link"><i class="fas fa-euro-sign text-success me-2"></i>APL <small class="d-block text-muted">Aide personnalis√©e</small></a></div>
                            <div class="col-md-4 mb-3"><a href="https://www.actionlogement.fr/visale" target="_blank" class="solution-link"><i class="fas fa-shield-alt text-info me-2"></i>Garantie Visale <small class="d-block text-muted">Garantie locative</small></a></div>
                            <div class="col-md-4 mb-3"><a href="https://www.service-public.fr/particuliers/vosdroits/F1625" target="_blank" class="solution-link"><i class="fas fa-hand-holding-heart text-warning me-2"></i>FSL <small class="d-block text-muted">Fonds Solidarit√©</small></a></div>
                            <div class="col-md-4 mb-3"><a href="https://www.anil.org" target="_blank" class="solution-link"><i class="fas fa-info-circle text-secondary me-2"></i>ANIL <small class="d-block text-muted">Agence nationale info logement</small></a></div>
                            <div class="col-md-4 mb-3"><a href="https://www.francetravail.fr/candidat/vos-droits-et-aides/aides-financieres/l-aide-a-la-mobilite.html" target="_blank" class="solution-link"><i class="fas fa-car text-danger me-2"></i>Aide mobilit√© <small class="d-block text-muted">Pour demandeurs d'emploi</small></a></div>
                        </div></div>
                        <!-- Pour les autres onglets, on mettra un contenu minimal -->
                        <div class="tab-pane" id="enfant-content"><div class="row">...</div></div>
                        <div class="tab-pane" id="sante-content"><div class="row">...</div></div>
                        <div class="tab-pane" id="transport-content"><div class="row">...</div></div>
                        <div class="tab-pane" id="formationAide-content"><div class="row">...</div></div>
                        <div class="tab-pane" id="juridique-content"><div class="row">...</div></div>
                    </div>
                    <div class="alert alert-warning mt-4"><i class="fas fa-exclamation-triangle me-2"></i>Contactez France Travail au 39 49 pour vos droits pr√©cis.</div>
                </div>
            </div>
        </section>

        <!-- STATISTICS SECTION (sans graphiques) -->
        <section id="stats" class="section">
            <div class="card shadow-lg">
                <div class="card-header bg-gradient-primary"><i class="fas fa-chart-bar me-2"></i>Statistiques ROME 4.0</div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-3"><div class="stat-card"><h1 class="text-primary" id="statMetiers">-</h1><p>Appellations de m√©tiers</p></div></div>
                        <div class="col-md-3"><div class="stat-card"><h1 class="text-success" id="statFiches">-</h1><p>Fiches ROME</p></div></div>
                        <div class="col-md-3"><div class="stat-card"><h1 class="text-warning" id="statDomaines">-</h1><p>Grands domaines</p></div></div>
                        <div class="col-md-3"><div class="stat-card"><h1 class="text-info" id="statCentres">-</h1><p>Centres d'int√©r√™t</p></div></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-8"><div class="card"><div class="card-header bg-primary text-white"><h5>Liste des domaines</h5></div><div class="card-body"><ul class="list-group" id="domainesStatList"></ul></div></div></div>
                        <div class="col-lg-4"><div class="card h-100"><div class="card-header bg-success text-white"><h5>Top domaines</h5></div><div class="card-body"><ul class="list-group list-group-flush" id="topDomainesList"></ul></div></div></div>
                    </div>
                    <div class="alert alert-info mt-4"><i class="fas fa-database me-2"></i>Source : R√©f√©rentiel op√©rationnel des m√©tiers et emplois (ROME) - Version 4.6.0 (septembre 2025)</div>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer"><div class="container"><div class="row">
        <div class="col-md-4"><h5>Orientation Pro</h5><p>Application bas√©e sur les donn√©es officielles ROME 4.0.</p></div>
        <div class="col-md-4"><h5>Liens officiels</h5><ul><li><a href="https://www.francetravail.fr" target="_blank">France Travail</a></li><li><a href="https://travail-emploi.gouv.fr" target="_blank">Minist√®re du Travail</a></li><li><a href="https://www.service-public.fr" target="_blank">Service-Public.fr</a></li></ul></div>
        <div class="col-md-4"><h5>Contact</h5><p>France Travail : 39 49</p><p class="small">Donn√©es mises √† jour : <span id="updateDate"></span></p></div>
    </div><div class="text-center mt-3"><small>¬© 2024 - Application non officielle bas√©e sur les donn√©es publiques France Travail</small></div></div></footer>

    <script>
        // ==================== JAVASCRIPT ====================
        document.addEventListener('DOMContentLoaded', initApp);

        // Variables globales
        let romeData = {
            metiers: [],
            fiches: new Set(),
            domaines: new Map(),
            centresInteret: []
        };
        let romeToFormation = new Map(); // code ROME -> liste de codes formation

        const LOAD_TIMEOUT = 8000; // 8 secondes

        async function initApp() {
            const timeoutId = setTimeout(() => {
                console.warn('Timeout chargement, donn√©es de secours');
                loadFallbackData();
                updateUI();
                showAlert('Chargement en mode d√©grad√©', 'warning');
            }, LOAD_TIMEOUT);

            try {
                await loadAllData();
                clearTimeout(timeoutId);
                updateUI();
                setupNavigation();
                setupEvents();
                document.getElementById('updateDate').textContent = new Date().toLocaleDateString('fr-FR');
            } catch (err) {
                clearTimeout(timeoutId);
                console.error('Erreur chargement', err);
                loadFallbackData();
                updateUI();
                showAlert('Erreur de chargement - mode d√©grad√©', 'danger');
            }
        }

        async function loadAllData() {
            const basePath = 'data/';
            // Les fichiers attendus
            const files = {
                principal: basePath + 'FCod.xls',
                romecod: basePath + 'RomeFCod.xls',
                gdom: basePath + 'GDom.xls'
            };

            const [bufPrincipal, bufRomeCod, bufGdom] = await Promise.all([
                fetch(files.principal).then(r => { if (!r.ok) throw new Error('FCod.xls manquant'); return r.arrayBuffer(); }),
                fetch(files.romecod).then(r => { if (!r.ok) throw new Error('RomeFCod.xls manquant'); return r.arrayBuffer(); }),
                fetch(files.gdom).then(r => { if (!r.ok) throw new Error('GDom.xls manquant'); return r.arrayBuffer(); })
            ]);

            // Traitement du fichier principal (FCod.xls) ‚Äì on prend le premier onglet pour les m√©tiers
            const wbPrincipal = XLSX.read(bufPrincipal, { type: 'array' });
            const sheetPrincipal = wbPrincipal.Sheets[wbPrincipal.SheetNames[0]];
            const rowsPrincipal = XLSX.utils.sheet_to_json(sheetPrincipal, { header: 1 });
            processPrincipalData(rowsPrincipal);

            // Centres d'int√©r√™t : chercher un onglet avec "centre" dans le nom
            const centreSheetName = wbPrincipal.SheetNames.find(name => name.toLowerCase().includes('centre'));
            if (centreSheetName) {
                const sheetCentre = wbPrincipal.Sheets[centreSheetName];
                const rowsCentre = XLSX.utils.sheet_to_json(sheetCentre, { header: 1 });
                processCentresData(rowsCentre);
            } else {
                console.warn('Onglet centres d\'int√©r√™t non trouv√©');
            }

            // Traitement du fichier RomeFCod.xls
            const wbRomeCod = XLSX.read(bufRomeCod, { type: 'array' });
            const sheetRomeCod = wbRomeCod.Sheets[wbRomeCod.SheetNames[0]];
            const rowsRomeCod = XLSX.utils.sheet_to_json(sheetRomeCod, { header: 1 });
            processRomeCodData(rowsRomeCod);

            // Traitement du fichier GDom.xls (pour enrichir les domaines si besoin)
            const wbGdom = XLSX.read(bufGdom, { type: 'array' });
            const sheetGdom = wbGdom.Sheets[wbGdom.SheetNames[0]];
            const rowsGdom = XLSX.utils.sheet_to_json(sheetGdom, { header: 1 });
            processGdomData(rowsGdom); // optionnel
        }

        function processPrincipalData(rows) {
            let currentDomaine = '';
            let seen = new Set();
            rows.forEach((row, idx) => {
                if (idx < 4) return;
                const codeDomaine = row[0] || '';
                const codeSous = row[1] || '';
                const codeFiche = row[2] || '';
                const libelle = row[3] || '';
                const codeOGR = row[4] ? String(row[4]).trim() : '';

                if (codeDomaine && !codeSous && !codeFiche && libelle) {
                    currentDomaine = codeDomaine;
                    if (!romeData.domaines.has(codeDomaine)) {
                        romeData.domaines.set(codeDomaine, { code: codeDomaine, libelle, count: 0 });
                    }
                }
                if (codeOGR && libelle) {
                    const key = `${libelle}|${codeOGR}`;
                    if (!seen.has(key)) {
                        seen.add(key);
                        romeData.metiers.push({ libelle, codeOGR, codeFiche, domaine: currentDomaine });
                        if (codeFiche) romeData.fiches.add(codeFiche);
                        if (currentDomaine && romeData.domaines.has(currentDomaine)) {
                            romeData.domaines.get(currentDomaine).count++;
                        }
                    }
                }
            });
        }

        function processCentresData(rows) {
            let current = null;
            rows.forEach((row, idx) => {
                if (idx < 1) return;
                const colA = row[0] || '';
                const colB = row[1] || '';
                if (colB && !colA && colB.includes('J\'')) {
                    if (current) romeData.centresInteret.push(current);
                    current = { libelle: colB, description: row[2] || '', codesRome: [] };
                } else if (colA && colA.trim() && current) {
                    current.codesRome.push(colA.trim());
                }
            });
            if (current) romeData.centresInteret.push(current);
        }

        function processRomeCodData(rows) {
            rows.forEach((row, idx) => {
                if (idx < 1) return;
                const codeRome = row[0] ? String(row[0]).trim() : '';
                if (!codeRome) return;
                const codes = [];
                for (let i = 1; i < row.length; i++) {
                    if (row[i] && typeof row[i] === 'string') {
                        row[i].split('$').forEach(p => {
                            const c = p.trim();
                            if (c && /^\d+$/.test(c)) codes.push(c);
                        });
                    }
                }
                if (codes.length) romeToFormation.set(codeRome, codes);
            });
        }

        function processGdomData(rows) {
            // Optionnel : on pourrait lire les grands domaines, mais d√©j√† pr√©sents dans les m√©tiers
        }

        // Donn√©es de secours
        function loadFallbackData() {
            romeData.metiers = [
                { libelle: 'D√©veloppeur informatique', codeOGR: 'M1805', codeFiche: 'M1805', domaine: 'M' },
                { libelle: 'Infirmier', codeOGR: 'J1501', codeFiche: 'J1501', domaine: 'J' },
                { libelle: 'Commercial', codeOGR: 'D1405', codeFiche: 'D1405', domaine: 'D' },
                { libelle: 'Assistant administratif', codeOGR: 'M1607', codeFiche: 'M1607', domaine: 'M' },
                { libelle: 'Conducteur routier', codeOGR: 'N1101', codeFiche: 'N1101', domaine: 'N' }
            ];
            romeData.fiches = new Set(romeData.metiers.map(m => m.codeFiche));
            romeData.domaines.set('M', { code: 'M', libelle: 'Support √† l\'entreprise', count: 2 });
            romeData.domaines.set('J', { code: 'J', libelle: 'Sant√©', count: 1 });
            romeData.domaines.set('D', { code: 'D', libelle: 'Commerce', count: 1 });
            romeData.domaines.set('N', { code: 'N', libelle: 'Transport', count: 1 });
            romeData.centresInteret = [
                { libelle: 'J\'aime √™tre au contact de la nature', codesRome: ['A1206'] },
                { libelle: 'J\'ai le sens des affaires', codesRome: ['C1101'] }
            ];
            romeToFormation.set('M1805', ['31067']);
            romeToFormation.set('J1501', ['43448']);
            romeToFormation.set('D1405', ['34573']);
        }

        function updateUI() {
            document.getElementById('metiersCount').textContent = romeData.metiers.length + ' m√©tiers';
            document.getElementById('domainesCount').textContent = romeData.domaines.size + ' domaines';
            document.getElementById('fichesCount').textContent = romeData.fiches.size + ' fiches';
            document.getElementById('statMetiers').textContent = romeData.metiers.length;
            document.getElementById('statFiches').textContent = romeData.fiches.size;
            document.getElementById('statDomaines').textContent = romeData.domaines.size;
            document.getElementById('statCentres').textContent = romeData.centresInteret.length;
            document.getElementById('statsMetiers').textContent = romeData.metiers.length;

            // Liste domaines accueil
            const domList = document.getElementById('domainesList');
            if (domList) {
                domList.innerHTML = '';
                romeData.domaines.forEach((d, code) => {
                    domList.innerHTML += `<li class="mb-2"><span class="badge badge-primary me-2">${code}</span> ${d.libelle} (${d.count} m√©tiers)</li>`;
                });
            }

            // Filtre domaine
            const filter = document.getElementById('domaineFilter');
            if (filter) {
                filter.innerHTML = '<option value="">Tous les domaines</option>';
                romeData.domaines.forEach((d, code) => filter.innerHTML += `<option value="${code}">${d.libelle}</option>`);
            }

            // Centres d'int√©r√™t
            const centreSelect = document.getElementById('centreInteret');
            if (centreSelect) {
                centreSelect.innerHTML = '';
                romeData.centresInteret.forEach(c => {
                    const opt = document.createElement('option');
                    opt.value = c.libelle;
                    opt.textContent = c.libelle;
                    centreSelect.appendChild(opt);
                });
            }

            // Stats domaines
            const statList = document.getElementById('domainesStatList');
            if (statList) {
                statList.innerHTML = '';
                romeData.domaines.forEach((d, code) => {
                    statList.innerHTML += `<li class="list-group-item d-flex justify-content-between"><span><strong>${code}</strong> - ${d.libelle}</span><span class="badge badge-primary">${d.count}</span></li>`;
                });
            }

            const topList = document.getElementById('topDomainesList');
            if (topList) {
                topList.innerHTML = '';
                const sorted = Array.from(romeData.domaines.entries()).sort((a,b) => b[1].count - a[1].count).slice(0,5);
                sorted.forEach(([code, d]) => {
                    topList.innerHTML += `<li class="list-group-item d-flex justify-content-between align-items-center">Domaine ${code} <span class="badge badge-primary rounded-pill">${d.count}</span></li>`;
                });
            }
        }

        function setupNavigation() {
            const links = document.querySelectorAll('.nav-link[data-section]');
            const sections = document.querySelectorAll('.section');
            links.forEach(l => {
                l.addEventListener('click', e => {
                    e.preventDefault();
                    links.forEach(lk => lk.classList.remove('active'));
                    l.classList.add('active');
                    sections.forEach(s => s.classList.remove('active'));
                    document.getElementById(l.dataset.section).classList.add('active');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            document.querySelector('.orientation-btn')?.addEventListener('click', () => {
                links.forEach(l => l.classList.remove('active'));
                document.querySelector('[data-section="orientation"]').classList.add('active');
                sections.forEach(s => s.classList.remove('active'));
                document.getElementById('orientation').classList.add('active');
            });
        }

        function setupEvents() {
            document.querySelectorAll('.competence-tag').forEach(t => {
                t.addEventListener('click', function() { this.classList.toggle('selected'); updateCompetences(); });
            });
            document.getElementById('profileForm').addEventListener('submit', e => { e.preventDefault(); analyzeProfile(); });
        }

        function updateCompetences() {
            document.getElementById('competences').value = Array.from(document.querySelectorAll('#competencesContainer .competence-tag.selected')).map(t => t.dataset.value).join(',');
            document.getElementById('softSkills').value = Array.from(document.querySelectorAll('#softSkillsContainer .competence-tag.selected')).map(t => t.dataset.value).join(',');
        }

        function analyzeProfile() {
            const secteur = document.getElementById('secteur').value;
            const competences = document.getElementById('competences').value.split(',').filter(c => c);
            const softSkills = document.getElementById('softSkills').value.split(',').filter(s => s);
            const difficulties = ['logement','garde_enfant','sante','transport','formation'].filter(id => document.getElementById(id)?.checked);
            if (difficulties.length) { displaySolutions(difficulties); document.getElementById('solutionsCard').classList.remove('d-none'); } else { document.getElementById('solutionsCard').classList.add('d-none'); }

            const metiersScore = romeData.metiers.map(m => {
                let score = 0, max = 0;
                if (secteur) { max += 30; if (m.libelle.toLowerCase().includes(secteur) || (m.codeOGR && m.codeOGR.toLowerCase().includes(secteur[0]))) score += 30; }
                competences.forEach(c => { max += 10; if (m.libelle.toLowerCase().includes(c)) score += 10; });
                softSkills.forEach(s => { max += 5; if (s === 'communication' && m.libelle.toLowerCase().includes('commercial')) score += 5; if (s === 'organisation' && m.libelle.toLowerCase().includes('assistant')) score += 5; });
                return { ...m, score: max ? Math.round((score/max)*100) : 0 };
            }).sort((a,b) => b.score - a.score).slice(0,10);

            displayMetiers(metiersScore);
            const avg = Math.round(metiersScore.reduce((a,b)=>a+b.score,0)/metiersScore.length);
            document.getElementById('avgScore').textContent = avg + '%';
            document.getElementById('resultsSection').classList.remove('d-none');
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function displayMetiers(metiers) {
            const container = document.getElementById('metiersList');
            container.innerHTML = '';
            metiers.forEach(m => {
                const codes = romeToFormation.get(m.codeOGR) || [];
                let lien = '#';
                if (codes.length) {
                    const params = codes.map(c => 'FORMACODE-' + c).join(',');
                    lien = `https://candidat.francetravail.fr/formations/recherche?filtreEstFormationEnCoursOuAVenir=formEnCours&quoi=${encodeURIComponent(params)}&range=0-9&tri=0`;
                }
                const item = document.createElement('div');
                item.className = 'list-group-item list-group-item-action';
                item.innerHTML = `
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="mb-1">${m.libelle}</h6>
                            <small class="text-muted">Code: ${m.codeOGR} | Domaine: ${m.domaine}</small>
                            <div class="mt-2">${codes.length ? `<a href="${lien}" target="_blank" class="btn btn-sm btn-outline-primary"><i class="fas fa-search me-1"></i>Voir les formations (${codes.length})</a>` : '<span class="text-muted">Aucune formation r√©f√©renc√©e</span>'}</div>
                        </div>
                        <span class="badge badge-primary fs-6">${m.score}%</span>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function displaySolutions(diff) {
            const sols = {
                logement: ['Action Logement : Aide √† la mobilit√©','APL','Garantie Visale'],
                garde_enfant: ['CMG','Cr√®ches places d\'urgence','Aide garde enfant'],
                sante: ['CMU-C','ACS','Consultations PASS'],
                transport: ['Aide √† l\'achat v√©hicule','Forfait mobilit√©s durables','Permis √† 1‚Ç¨'],
                formation: ['CPF','POEC','AIF']
            };
            const container = document.getElementById('solutionsContainer');
            container.innerHTML = '';
            diff.forEach(d => {
                if (sols[d]) {
                    const col = document.createElement('div');
                    col.className = 'col-md-6 mb-3';
                    col.innerHTML = `<div class="solution-card"><h6>${getLabel(d)}</h6><ul class="mb-0">${sols[d].map(s => `<li><small>${s}</small></li>`).join('')}</ul></div>`;
                    container.appendChild(col);
                }
            });
        }

        function getLabel(k) {
            const labels = { logement:'üè† Logement', garde_enfant:'üë∂ Garde d\'enfant', sante:'üè• Sant√©', transport:'üöó Transport', formation:'üìö Formation' };
            return labels[k] || k;
        }

        function toggleNavbar() { document.getElementById('navbarNav').classList.toggle('show'); }
        function switchTab(tab) {
            document.querySelectorAll('#aidesTab .nav-link').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('#aidesTabContent .tab-pane').forEach(p => p.classList.remove('active'));
            document.getElementById(tab + '-content').classList.add('active');
        }
        function showAlert(msg, type) {
            const a = document.createElement('div');
            a.className = `alert alert-${type} alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3`;
            a.style.zIndex = '9999';
            a.innerHTML = msg + '<button type="button" class="btn-close" onclick="this.parentElement.remove()">√ó</button>';
            document.body.appendChild(a);
            setTimeout(() => a.remove(), 5000);
        }

        window.toggleNavbar = toggleNavbar;
        window.switchTab = switchTab;
    </script>
</body>
</html>
